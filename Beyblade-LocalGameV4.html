<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beyblade Burst - Real Battle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            width: 100%;
            max-width: 1000px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #ffff00;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255, 255, 0, 0.5);
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .menu-screen {
            text-align: center;
        }

        .button {
            background: linear-gradient(135deg, #ff6b00 0%, #ff0000 100%);
            color: white;
            border: 3px solid #ffff00;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 100, 0, 0.8);
        }

        .bey-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .bey-option {
            background: rgba(255, 100, 0, 0.2);
            border: 3px solid #ff6b00;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .bey-option:hover {
            border-color: #ffff00;
            box-shadow: 0 0 15px rgba(255, 100, 0, 0.6);
        }

        .bey-option.selected {
            border-color: #00ff00;
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.8);
        }

        .bey-img {
            width: 80px;
            height: 80px;
            margin: 10px auto;
            font-size: 3em;
        }

        .bey-name {
            font-weight: bold;
            color: #ffff00;
        }

        /* ===== BATTLE ARENA ===== */
        .battle-container {
            background: rgba(0, 0, 0, 0.9);
            border: 4px solid #ff6b00;
            border-radius: 20px;
            padding: 20px;
        }

        #stadium {
            width: 100%;
            height: 600px;
            background: radial-gradient(circle at center, #444 0%, #222 50%, #000 100%);
            border: 5px solid #ff6b00;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.8), 0 0 50px rgba(255, 100, 0, 0.3);
        }

        .beyblade {
            position: absolute;
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            cursor: pointer;
            filter: drop-shadow(0 0 10px rgba(255, 255, 0, 0.6));
        }

        .beyblade.spinning {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .beyblade.hit {
            animation: hitEffect 0.3s;
        }

        @keyframes hitEffect {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 10px rgba(255, 255, 0, 0.6)); }
            50% { filter: brightness(1.5) drop-shadow(0 0 20px rgba(255, 0, 0, 1)); }
        }

        .beyblade.burst {
            animation: burstEffect 0.5s;
        }

        @keyframes burstEffect {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.1); opacity: 0; }
        }

        /* ===== STATUS DISPLAY ===== */
        .status-bar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .player-status {
            background: rgba(255, 100, 0, 0.1);
            border: 2px solid #ff6b00;
            padding: 15px;
            border-radius: 10px;
            color: white;
        }

        .player-status h3 {
            color: #ffff00;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .hp-bar {
            background: #333;
            height: 30px;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
            border: 2px solid #ff6b00;
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #ffff00);
            width: 100%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
        }

        .hp-fill.low {
            background: linear-gradient(90deg, #ff0000, #ff6b00);
        }

        .stamina-bar {
            background: #333;
            height: 20px;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
            border: 2px solid #ff8800;
        }

        .stamina-fill {
            height: 100%;
            background: linear-gradient(90deg, #0080ff, #00ffff);
            width: 100%;
            transition: width 0.2s;
        }

        .stat-text {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            color: #aaa;
        }

        .stat-value {
            color: #ffff00;
            font-weight: bold;
        }

        /* ===== BATTLE LOG ===== */
        .battle-log {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff6b00;
            border-radius: 10px;
            padding: 15px;
            height: 150px;
            overflow-y: auto;
            color: #0f0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin: 20px 0;
        }

        .log-entry {
            margin: 5px 0;
            padding-bottom: 3px;
        }

        .log-entry.damage {
            color: #ff6b6b;
        }

        .log-entry.burst {
            color: #ffaa00;
            font-weight: bold;
        }

        /* ===== INFO BOX ===== */
        .info-box {
            background: rgba(255, 100, 0, 0.2);
            border: 2px solid #ff6b00;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
            margin: 20px 0;
            font-size: 1.1em;
        }

        .countdown {
            font-size: 3em;
            color: #ffff00;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .input-group {
            margin: 20px 0;
        }

        .text-input {
            background: rgba(255, 100, 0, 0.2);
            border: 2px solid #ff6b00;
            padding: 10px;
            border-radius: 8px;
            color: white;
            font-size: 1em;
            margin: 10px;
            width: 250px;
        }

        .text-input::placeholder {
            color: #aaa;
        }

        .winner-text {
            font-size: 2.5em;
            color: #ffff00;
            text-shadow: 0 0 20px rgba(255, 255, 0, 0.8);
            margin: 30px 0;
        }

        .message {
            font-size: 1.2em;
            color: #ff6b00;
            margin: 20px 0;
        }

        .burst-message {
            color: #ffaa00;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üî• BEYBLADE BURST üî•</h1>
            <p style="color: #ff6b00; font-size: 1.1em;">LET IT RIP!</p>
        </div>

        <!-- MENU -->
        <div class="screen active menu-screen" id="menuScreen">
            <h2 style="color: #ff6b00; margin: 30px 0;">SELECT GAME MODE</h2>
            
            <button class="button" onclick="game.startPvP()">‚öîÔ∏è PVP MODE</button>
            <button class="button" onclick="game.startStory()">üìñ STORY MODE</button>
        </div>

        <!-- SETUP -->
        <div class="screen menu-screen" id="setupScreen">
            <h2 style="color: #ff6b00; margin: 30px 0;">ENTER NAMES</h2>
            
            <div class="input-group">
                <input type="text" class="text-input" id="p1Name" placeholder="Player 1 Name" maxlength="15">
                <input type="text" class="text-input" id="p2Name" placeholder="Player 2 Name" maxlength="15">
            </div>
            
            <button class="button" onclick="game.goToSelection()">CONTINUE</button>
            <button class="button" onclick="game.showMenu()" style="background: #666;">BACK</button>
        </div>

        <!-- BEYBLADE SELECTION -->
        <div class="screen menu-screen" id="selectionScreen">
            <h2 style="color: #ff6b00; margin: 30px 0;" id="selectionTitle">SELECT BEYBLADES</h2>
            
            <div class="bey-selector" id="beySelector"></div>
            
            <button class="button" id="startBtn" onclick="game.startBattle()" disabled>START BATTLE</button>
            <button class="button" onclick="game.showMenu()" style="background: #666;">BACK</button>
        </div>

        <!-- BATTLE -->
        <div class="screen" id="battleScreen">
            <div class="battle-container">
                <div class="info-box" id="infoBox" style="display: none;">
                    <p>Battle Starts In...</p>
                    <div class="countdown" id="countdown">3</div>
                </div>

                <canvas id="stadium"></canvas>

                <div class="status-bar">
                    <div class="player-status">
                        <h3 id="p1NameDisplay"></h3>
                        <div class="hp-bar">
                            <div class="hp-fill" id="p1HpBar"></div>
                        </div>
                        <div class="stat-text">
                            <span>HP:</span>
                            <span class="stat-value" id="p1HpText">100/100</span>
                        </div>
                        <div class="stamina-bar">
                            <div class="stamina-fill" id="p1StaminaBar"></div>
                        </div>
                        <div class="stat-text">
                            <span>Stamina:</span>
                            <span class="stat-value" id="p1StaminaText">100/100</span>
                        </div>
                        <div class="stat-text">
                            <span>Bursts:</span>
                            <span class="stat-value" id="p1Bursts">0/3</span>
                        </div>
                    </div>

                    <div class="player-status">
                        <h3 id="p2NameDisplay"></h3>
                        <div class="hp-bar">
                            <div class="hp-fill" id="p2HpBar"></div>
                        </div>
                        <div class="stat-text">
                            <span>HP:</span>
                            <span class="stat-value" id="p2HpText">100/100</span>
                        </div>
                        <div class="stamina-bar">
                            <div class="stamina-fill" id="p2StaminaBar"></div>
                        </div>
                        <div class="stat-text">
                            <span>Stamina:</span>
                            <span class="stat-value" id="p2StaminaText">100/100</span>
                        </div>
                        <div class="stat-text">
                            <span>Bursts:</span>
                            <span class="stat-value" id="p2Bursts">0/3</span>
                        </div>
                    </div>
                </div>

                <div class="battle-log" id="battleLog"></div>
            </div>
        </div>

        <!-- END -->
        <div class="screen menu-screen" id="endScreen">
            <h1 class="winner-text" id="winnerText">PLAYER 1 WINS!</h1>
            <p class="message" id="resultMessage"></p>
            
            <button class="button" onclick="game.showMenu()">BACK TO MENU</button>
            <button class="button" onclick="location.reload()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        const BEYBLADES = {
            spryzen: { name: 'Spryzen', emoji: 'üå™Ô∏è', speed: 9, attack: 8, stamina: 7 },
            valtrak: { name: 'Valtrak', emoji: '‚ö°', speed: 8, attack: 9, stamina: 6 },
            fafnir: { name: 'Fafnir', emoji: 'üêâ', speed: 6, attack: 9, stamina: 8 },
            phoenix: { name: 'Phoenix', emoji: 'üî•', speed: 8, attack: 8, stamina: 8 },
            apocalypse: { name: 'Prime Apocalypse', emoji: 'üíÄ', speed: 7, attack: 10, stamina: 7 }
        };

        const STORY_OPPONENTS = [
            { name: 'Rookie Blader', bey: 'spryzen' },
            { name: 'Veteran Blader', bey: 'valtrak' },
            { name: 'Expert Master', bey: 'fafnir' },
            { name: 'Legendary Blader', bey: 'phoenix' },
            { name: 'FINAL BOSS', bey: 'apocalypse' }
        ];

        const game = {
            canvas: null,
            ctx: null,
            mode: null,
            isAI: false,
            storyBattle: 0,

            p1: { x: 0, y: 0, vx: 0, vy: 0, hp: 0, maxHp: 0, stamina: 0, maxStamina: 0, bursts: 0, name: '', bey: null, angle: 0 },
            p2: { x: 0, y: 0, vx: 0, vy: 0, hp: 0, maxHp: 0, stamina: 0, maxStamina: 0, bursts: 0, name: '', bey: null, angle: 0 },

            gameActive: false,
            radius: 150,

            showScreen(id) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            },

            showMenu() {
                this.showScreen('menuScreen');
            },

            startPvP() {
                this.mode = 'pvp';
                this.isAI = false;
                this.showScreen('setupScreen');
            },

            startStory() {
                this.mode = 'story';
                this.isAI = true;
                this.storyBattle = 0;
                this.p1.name = 'You';
                this.goToSelection();
            },

            goToSelection() {
                if (this.mode === 'pvp') {
                    const p1 = document.getElementById('p1Name').value || 'Player 1';
                    const p2 = document.getElementById('p2Name').value || 'Player 2';
                    this.p1.name = p1;
                    this.p2.name = p2;
                }

                this.showScreen('selectionScreen');
                this.populateSelection();
            },

            populateSelection() {
                const container = document.getElementById('beySelector');
                container.innerHTML = '';

                Object.keys(BEYBLADES).forEach(key => {
                    const bey = BEYBLADES[key];
                    const card = document.createElement('div');
                    card.className = 'bey-option';
                    card.innerHTML = `<div class="bey-img">${bey.emoji}</div><div class="bey-name">${bey.name}</div>`;
                    card.onclick = () => this.selectBey(key, card);
                    container.appendChild(card);
                });
            },

            selectBey(key, element) {
                document.querySelectorAll('.bey-option').forEach(c => c.classList.remove('selected'));
                element.classList.add('selected');

                if (!this.p1.bey) {
                    this.p1.bey = key;
                } else if (!this.p2.bey) {
                    this.p2.bey = key;
                    document.getElementById('startBtn').disabled = false;
                }
            },

            startBattle() {
                if (this.isAI) {
                    const opp = STORY_OPPONENTS[this.storyBattle];
                    this.p2.name = opp.name;
                    this.p2.bey = opp.bey;
                }

                this.initBattle();
            },

            initBattle() {
                const beyData1 = BEYBLADES[this.p1.bey];
                const beyData2 = BEYBLADES[this.p2.bey];

                this.p1.hp = this.p1.maxHp = 100 + beyData1.attack * 3;
                this.p2.hp = this.p2.maxHp = 100 + beyData2.attack * 3;

                this.p1.stamina = this.p1.maxStamina = 100 + beyData1.stamina * 10;
                this.p2.stamina = this.p2.maxStamina = 100 + beyData2.stamina * 10;

                this.p1.bursts = 0;
                this.p2.bursts = 0;

                this.p1.angle = 0;
                this.p2.angle = 0;

                document.getElementById('p1NameDisplay').textContent = this.p1.name + ` - ${beyData1.name}`;
                document.getElementById('p2NameDisplay').textContent = this.p2.name + ` - ${beyData2.name}`;

                this.canvas = document.getElementById('stadium');
                this.ctx = this.canvas.getContext('2d');
                this.canvas.width = 600;
                this.canvas.height = 600;

                this.clearLog();
                this.addLog(`‚öîÔ∏è ${this.p1.name} vs ${this.p2.name}`);
                this.addLog(`${beyData1.name} üÜö ${beyData2.name}`);

                this.showScreen('battleScreen');
                this.updateUI();
                this.startCountdown();
            },

            startCountdown() {
                document.getElementById('infoBox').style.display = 'block';
                let count = 3;
                const interval = setInterval(() => {
                    document.getElementById('countdown').textContent = count;
                    count--;
                    if (count < 0) {
                        clearInterval(interval);
                        document.getElementById('infoBox').style.display = 'none';
                        this.addLog('üöÄ LET IT RIP! üöÄ');
                        this.gameActive = true;
                        this.launchBeyblades();
                    }
                }, 1000);
            },

            launchBeyblades() {
                const beyData1 = BEYBLADES[this.p1.bey];
                const beyData2 = BEYBLADES[this.p2.bey];

                // Random positions on circle
                const angle1 = Math.random() * Math.PI * 2;
                const angle2 = angle1 + Math.PI + (Math.random() - 0.5) * 0.5;

                this.p1.x = 300 + Math.cos(angle1) * this.radius;
                this.p1.y = 300 + Math.sin(angle1) * this.radius;
                this.p1.vx = Math.cos(angle1) * beyData1.speed * 2;
                this.p1.vy = Math.sin(angle1) * beyData1.speed * 2;

                this.p2.x = 300 + Math.cos(angle2) * this.radius;
                this.p2.y = 300 + Math.sin(angle2) * this.radius;
                this.p2.vx = Math.cos(angle2) * beyData2.speed * 2;
                this.p2.vy = Math.sin(angle2) * beyData2.speed * 2;

                this.animate();
            },

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                // Draw stadium
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
                this.ctx.beginPath();
                this.ctx.arc(300, 300, 280, 0, Math.PI * 2);
                this.ctx.fill();

                this.ctx.strokeStyle = '#ff6b00';
                this.ctx.lineWidth = 3;
                this.ctx.beginPath();
                this.ctx.arc(300, 300, 280, 0, Math.PI * 2);
                this.ctx.stroke();

                // Physics
                this.updatePhysics();

                // Draw beyblades
                this.drawBeyblade(this.p1);
                this.drawBeyblade(this.p2);

                // Check collisions
                this.checkCollision();

                // Check if beyblades are spinning out
                this.checkStaminaLoss();

                // AI decision
                if (this.isAI && this.gameActive) {
                    this.aiAttack();
                }

                // Continue animation if game active
                if (this.gameActive) {
                    requestAnimationFrame(() => this.animate());
                } else {
                    this.updateUI();
                }
            },

            updatePhysics() {
                // Friction
                this.p1.vx *= 0.98;
                this.p1.vy *= 0.98;
                this.p2.vx *= 0.98;
                this.p2.vy *= 0.98;

                // Stamina loss (spinning)
                const speed1 = Math.sqrt(this.p1.vx ** 2 + this.p1.vy ** 2);
                const speed2 = Math.sqrt(this.p2.vx ** 2 + this.p2.vy ** 2);

                this.p1.stamina -= speed1 * 0.3;
                this.p2.stamina -= speed2 * 0.3;

                // Position update
                this.p1.x += this.p1.vx;
                this.p1.y += this.p1.vy;
                this.p2.x += this.p2.vx;
                this.p2.y += this.p2.vy;

                // Stadium boundaries (bounce)
                const dist1 = Math.sqrt((this.p1.x - 300) ** 2 + (this.p1.y - 300) ** 2);
                const dist2 = Math.sqrt((this.p2.x - 300) ** 2 + (this.p2.y - 300) ** 2);

                if (dist1 > 280) {
                    const angle = Math.atan2(this.p1.y - 300, this.p1.x - 300);
                    this.p1.x = 300 + Math.cos(angle) * 280;
                    this.p1.y = 300 + Math.sin(angle) * 280;
                    this.p1.vx *= -0.8;
                    this.p1.vy *= -0.8;
                }

                if (dist2 > 280) {
                    const angle = Math.atan2(this.p2.y - 300, this.p2.x - 300);
                    this.p2.x = 300 + Math.cos(angle) * 280;
                    this.p2.y = 300 + Math.sin(angle) * 280;
                    this.p2.vx *= -0.8;
                    this.p2.vy *= -0.8;
                }

                // Ring out (stamina too low)
                if (this.p1.stamina <= 0) {
                    this.p1.stamina = 0;
                    this.p1.vx = 0;
                    this.p1.vy = 0;
                }
                if (this.p2.stamina <= 0) {
                    this.p2.stamina = 0;
                    this.p2.vx = 0;
                    this.p2.vy = 0;
                }
            },

            drawBeyblade(player) {
                player.angle += Math.sqrt(player.vx ** 2 + player.vy ** 2) * 2;

                this.ctx.save();
                this.ctx.translate(player.x, player.y);
                this.ctx.rotate(player.angle);

                const bey = BEYBLADES[player.bey];
                this.ctx.font = '50px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.textBaseline = 'middle';
                this.ctx.fillText(bey.emoji, 0, 0);

                this.ctx.restore();

                // Health indicator
                const speed = Math.sqrt(player.vx ** 2 + player.vy ** 2);
                if (speed < 0.5) {
                    this.ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';
                    this.ctx.beginPath();
                    this.ctx.arc(player.x, player.y, 45, 0, Math.PI * 2);
                    this.ctx.fill();
                }
            },

            checkCollision() {
                const dx = this.p2.x - this.p1.x;
                const dy = this.p2.y - this.p1.y;
                const dist = Math.sqrt(dx ** 2 + dy ** 2);

                if (dist < 50) {
                    // Collision!
                    const beyData1 = BEYBLADES[this.p1.bey];
                    const beyData2 = BEYBLADES[this.p2.bey];

                    const damage1 = beyData2.attack * 5;
                    const damage2 = beyData1.attack * 5;

                    this.p1.hp -= damage2;
                    this.p2.hp -= damage1;

                    this.addLog(`üí• COLLISION! ${beyData1.name} hits ${beyData2.name}!`);

                    // Knockback
                    const angle = Math.atan2(dy, dx);
                    this.p1.vx -= Math.cos(angle) * beyData2.speed;
                    this.p1.vy -= Math.sin(angle) * beyData2.speed;
                    this.p2.vx += Math.cos(angle) * beyData1.speed;
                    this.p2.vy += Math.sin(angle) * beyData1.speed;

                    // Check for burst
                    if (this.p1.hp <= 0 && this.p1.bursts < 3) {
                        this.p1.bursts++;
                        this.p1.hp = this.p1.maxHp * 0.5;
                        this.addLog(`üí´ ${this.p1.name}'s Burst Resistance! [${this.p1.bursts}/3]`);
                    }
                    if (this.p2.hp <= 0 && this.p2.bursts < 3) {
                        this.p2.bursts++;
                        this.p2.hp = this.p2.maxHp * 0.5;
                        this.addLog(`üí´ ${this.p2.name}'s Burst Resistance! [${this.p2.bursts}/3]`);
                    }

                    this.updateUI();
                    this.checkEnd();
                }
            },

            checkStaminaLoss() {
                if (this.p1.stamina <= 0 && (this.p1.vx === 0 && this.p1.vy === 0)) {
                    this.addLog(`üõë ${this.p1.name}'s beyblades stopped spinning!`);
                    this.endBattle(2);
                }
                if (this.p2.stamina <= 0 && (this.p2.vx === 0 && this.p2.vy === 0)) {
                    this.addLog(`üõë ${this.p2.name}'s beyblades stopped spinning!`);
                    this.endBattle(1);
                }
            },

            checkEnd() {
                if (this.p1.hp <= 0 && this.p1.bursts >= 3) {
                    this.endBattle(2);
                } else if (this.p2.hp <= 0 && this.p2.bursts >= 3) {
                    this.endBattle(1);
                }
            },

            aiAttack() {
                // AI doesn't attack - it's automatic! The beyblades collide naturally
            },

            endBattle(winner) {
                this.gameActive = false;
                const winnerName = winner === 1 ? this.p1.name : this.p2.name;

                document.getElementById('winnerText').textContent = `${winnerName.toUpperCase()} WINS!`;
                document.getElementById('resultMessage').textContent = 'Victory! Great battle!';

                if (this.isAI && winner === 1 && this.storyBattle < STORY_OPPONENTS.length - 1) {
                    this.storyBattle++;
                    document.getElementById('resultMessage').textContent += ` Next opponent: ${STORY_OPPONENTS[this.storyBattle].name}`;
                    setTimeout(() => {
                        this.p1.bey = null;
                        this.p2.bey = null;
                        this.startBattle();
                    }, 3000);
                }

                this.showScreen('endScreen');
            },

            updateUI() {
                document.getElementById('p1HpBar').style.width = (this.p1.hp / this.p1.maxHp * 100) + '%';
                document.getElementById('p2HpBar').style.width = (this.p2.hp / this.p2.maxHp * 100) + '%';

                document.getElementById('p1HpText').textContent = `${Math.ceil(this.p1.hp)}/${this.p1.maxHp}`;
                document.getElementById('p2HpText').textContent = `${Math.ceil(this.p2.hp)}/${this.p2.maxHp}`;

                document.getElementById('p1StaminaBar').style.width = (this.p1.stamina / this.p1.maxStamina * 100) + '%';
                document.getElementById('p2StaminaBar').style.width = (this.p2.stamina / this.p2.maxStamina * 100) + '%';

                document.getElementById('p1StaminaText').textContent = `${Math.ceil(this.p1.stamina)}/${this.p1.maxStamina}`;
                document.getElementById('p2StaminaText').textContent = `${Math.ceil(this.p2.stamina)}/${this.p2.maxStamina}`;

                document.getElementById('p1Bursts').textContent = `${this.p1.bursts}/3`;
                document.getElementById('p2Bursts').textContent = `${this.p2.bursts}/3`;
            },

            clearLog() {
                document.getElementById('battleLog').innerHTML = '';
            },

            addLog(msg) {
                const log = document.getElementById('battleLog');
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.textContent = msg;
                log.appendChild(entry);
                log.scrollTop = log.scrollHeight;
            }
        };
    </script>
</body>
</html>